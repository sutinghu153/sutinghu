{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{394:function(t,a,e){\"use strict\";e.r(a);var s=e(54),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[e(\"h1\",{attrs:{align:\"center\"}},[t._v(\"Elastic-Search\")]),t._v(\" \"),e(\"p\",[t._v(\"关于ealstic-search的原理与实践。\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_01-大数据\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_01-大数据\"}},[t._v(\"#\")]),t._v(\" 01 大数据\")]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_1-1-大数据的检索问题\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-1-大数据的检索问题\"}},[t._v(\"#\")]),t._v(\" 1-1 大数据的检索问题\")]),t._v(\" \"),e(\"p\",[t._v(\"当系统中的数据量达到上亿规模时，数据量会达到PB级别，这个时候，对于数据的架构设计，会存在相当多的问题，比如\")]),t._v(\" \"),e(\"ol\",[e(\"li\",[t._v(\"哪个数据库更适合做大数据的处理\")]),t._v(\" \"),e(\"li\",[t._v(\"大数据的单点故障如何解决\")]),t._v(\" \"),e(\"li\",[t._v(\"数据的安全性怎么保证\")]),t._v(\" \"),e(\"li\",[t._v(\"如何实现高效的大数据检索\")]),t._v(\" \"),e(\"li\",[t._v(\"大数据下统计分析如何进行\")])]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_1-2-大数据下的传统方案\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-2-大数据下的传统方案\"}},[t._v(\"#\")]),t._v(\" 1-2 大数据下的传统方案\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"关系型数据库\")])]),t._v(\" \"),e(\"p\",[t._v(\"1）通过主从备份解决数据安全性问题；\\n2）通过数据库代理中间件心跳监测，解决单点故障问题；\\n3）通过代理中间件将查询语句分发到各个slave节点进行查询，并汇总结果\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"非关系型数据库\")])]),t._v(\" \"),e(\"p\",[t._v(\"1）通过副本备份保证数据安全性；\\n2）通过节点竞选机制解决单点问题；\\n3）先从配置库检索分片信息，然后将请求分发到各个节点，最后由路由节点合并汇总结果\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_02-关于es\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_02-关于es\"}},[t._v(\"#\")]),t._v(\" 02 关于ES\")]),t._v(\" \"),e(\"p\",[t._v(\"elastic-search 是一个分布式、可拓展、实时的搜索与数据分析引擎。它可以从项目一开始就让我们能够获得数据的搜索、分析和探索的能力。\")]),t._v(\" \"),e(\"p\",[t._v(\"能够满足的需求\")]),t._v(\" \"),e(\"ul\",[e(\"li\",[t._v(\"全文检索\")]),t._v(\" \"),e(\"li\",[t._v(\"结构化搜索\")]),t._v(\" \"),e(\"li\",[t._v(\"分析\")]),t._v(\" \"),e(\"li\",[t._v(\"...\")])]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_03-安装es\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_03-安装es\"}},[t._v(\"#\")]),t._v(\" 03 安装ES\")]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_3-1-下载和安装\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-1-下载和安装\"}},[t._v(\"#\")]),t._v(\" 3-1 下载和安装\")]),t._v(\" \"),e(\"blockquote\",[e(\"p\",[t._v(\"下载 ES\")]),t._v(\" \"),e(\"p\",[e(\"a\",{attrs:{href:\"https://www.elastic.co/cn/downloads/elasticsearch\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"Download Elasticsearch | Elastic\"),e(\"OutboundLink\")],1)])]),t._v(\" \"),e(\"blockquote\",[e(\"p\",[t._v(\"安装 ES\")]),t._v(\" \"),e(\"p\",[t._v(\"[Installation | Elasticsearch Reference \"),e(\"a\",{attrs:{href:\"https://www.elastic.co/guide/en/elasticsearch/reference/5.6/_installation.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"5.6] | Elastic\"),e(\"OutboundLink\")],1)])]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_3-2-启动和检测\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-2-启动和检测\"}},[t._v(\"#\")]),t._v(\" 3-2 启动和检测\")]),t._v(\" \"),e(\"h4\",{attrs:{id:\"启动\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#启动\"}},[t._v(\"#\")]),t._v(\" 启动\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[t._v(\"cd elasticsearch-<version>\\n./bin/elasticsearch  【A】\\n\")])])]),e(\"blockquote\",[e(\"p\",[t._v(\"注： 如果想将Elasticsearch 作为一个守护进程在后台运行，则需要在后面添加参数 -d [A]\")]),t._v(\" \"),e(\"p\",[t._v(\"如果是在windows上面运行elastic search，需要运行bin\\\\elasticsearch.bat 而不是bin\\\\elasticsearch\")])]),t._v(\" \"),e(\"h4\",{attrs:{id:\"检测\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#检测\"}},[t._v(\"#\")]),t._v(\" 检测\")]),t._v(\" \"),e(\"p\",[t._v(\"方案一\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[t._v(\"执行 jps\\n检查是否存在 es进程：Elasticsearch\\n\")])])]),e(\"p\",[t._v(\"方案二\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[t._v(\"curl 'http://localhost:9200/?pretty'\\n\")])])]),e(\"p\",[t._v(\"在另一个终端访问该地址，如果访问成功，会得到一个类似的结果\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[t._v('{\\n  \"name\" : \"Tom Foster\",\\n  \"cluster_name\" : \"elasticsearch\",\\n  \"version\" : {\\n    \"number\" : \"2.1.0\",\\n    \"build_hash\" : \"72cd1f1a3eee09505e036106146dc1949dc5dc87\",\\n    \"build_timestamp\" : \"2015-11-18T22:40:03Z\",\\n    \"build_snapshot\" : false,\\n    \"lucene_version\" : \"5.3.1\"\\n  },\\n  \"tagline\" : \"You Know, for Search\"\\n}\\n')])])]),e(\"blockquote\",[e(\"p\",[t._v(\"以上json格式返回的结果表示当前已启动并运行了一个ElasticSearch节点\")]),t._v(\" \"),e(\"p\",[t._v(\"单个节点可以作为一个运行中的ES实例，而一个集群是一组拥有相同 \"),e(\"code\",[t._v(\"cluster_name\")]),t._v(\" 的节点，集群中的节点可以一起工作并共享数据，还提供容错与可伸缩性。\")])]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_04-交互es\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_04-交互es\"}},[t._v(\"#\")]),t._v(\" 04 交互ES\")]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_4-1-客户端\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-1-客户端\"}},[t._v(\"#\")]),t._v(\" 4-1 客户端\")]),t._v(\" \"),e(\"p\",[t._v(\"Java 与ES的交互可以使用ES内置的两个客户端。\")]),t._v(\" \"),e(\"ul\",[e(\"li\",[e(\"p\",[t._v(\"节点客户端（Node client）\")]),t._v(\" \"),e(\"p\",[t._v(\"节点客户端作为一个非数据节点加入到本地集群中。节点客户端本身不保存任何数据，但是它知道数据在集群的哪个节点中，并且可以把请求转发到准确的节点。\")])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"传输客户端（Transport client）\")]),t._v(\" \"),e(\"p\",[t._v(\"轻量级的传输客户端可以将请求发送到远程集群，本身不加入集群，但是可以将请求转发到集群的节点上。\")])])]),t._v(\" \"),e(\"blockquote\",[e(\"p\",[t._v(\"两个Java客户端都是通过  9300 端口并使用 ES 的原生传输协议和集群交互。集群中的节点通过 9300 彼此通信，如果该端口没有打开，节点将无法形成一个集群。\")])]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_4-2-访问\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-2-访问\"}},[t._v(\"#\")]),t._v(\" 4-2 访问\")]),t._v(\" \"),e(\"ol\",[e(\"li\",[e(\"p\",[t._v(\"Java之外的其它语言都可以使用 RESTful API 通过端口9200 和 ES 进行通信。\")])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"使用\"),e(\"code\",[t._v(\"curl\")]),t._v(\" 命令进行交互\")]),t._v(\" \"),e(\"ol\",[e(\"li\",[e(\"p\",[t._v(\"交互的路径\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[t._v(\"curl -X<VERB> '<PROTOCOL>://<HOST>:<PORT>/<PATH>?<QUERY_STRING>' -d '<BODY>'\\n\")])])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"参数的说明\")]),t._v(\" \"),e(\"table\",[e(\"thead\",[e(\"tr\",[e(\"th\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"部件\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"解释\")])])]),t._v(\" \"),e(\"tbody\",[e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"VERB\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"HTTP方法或GET POST PUT HEAD DELETE 等谓词\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"PROTOCOL\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"http或https\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"HOST\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"ES集群中的主机名\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"PORT\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"端口号，默认 9200\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"PATH\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"API的终端路径\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"QUERY_STRING\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"任意可选的查询字符串\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"BODY\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"一个 JSON 格式的请求体 (如果请求需要的话)\")])])])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"例子\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[t._v(\"curl -XGET 'http://localhost:9200/_count?pretty' -d '\\n{\\n    \\\"query\\\": {\\n        \\\"match_all\\\": {}\\n    }\\n}\\n'\\n\")])])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"返回值\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[t._v('{\\n    \"count\" : 0,\\n    \"_shards\" : {\\n        \"total\" : 5,\\n        \"successful\" : 5,\\n        \"failed\" : 0\\n    }\\n}\\n')])])])])])])]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_4-3-面向文档\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-3-面向文档\"}},[t._v(\"#\")]),t._v(\" 4-3 面向文档\")]),t._v(\" \"),e(\"p\",[t._v(\"在应用程序中很少只是一个简单的键值对的列表。通常，它们拥有更复杂的数据结构，可能包括日期、地理信息、其它对象或者数组等。\")]),t._v(\" \"),e(\"p\",[t._v(\"ElasticSearch 是面向文档的，意味着它存储整个对象或文档。elastic search不仅存储文档，而且索引每个文档的内容，使之可以被检索。\")]),t._v(\" \"),e(\"p\",[t._v(\"在ES中，我们对文档进行索引、检索、排序和过滤而不是对行列数据进行处理。这是一种完全不同的思考数据的方式，也是ES能支持复杂全文检索的原因。\")]),t._v(\" \"),e(\"p\",[t._v(\"ES对文档的序列化格式是JSON。\")])])}),[],!1,null,null,null);a.default=_.exports}}]);","extractedComments":[]}